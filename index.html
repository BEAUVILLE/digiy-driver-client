<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>DIGIY DRIVER - Commander un VTC</title>
  <meta name="theme-color" content="#16a34a">
  <meta name="description" content="Commandez votre VTC au S√©n√©gal - 0% commission">
  
  <style>
    :root {
      --green: #16a34a;
      --gold: #facc15;
      --orange: #f97316;
      --dark: #0f172a;
      --gray: #64748b;
    }
    
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    
    body {
      font-family: system-ui, -apple-system, sans-serif;
      background: linear-gradient(135deg, #f8fafc 0%, #e0f2fe 100%);
      min-height: 100vh;
      padding: 20px;
    }
    
    .container {
      max-width: 1200px;
      margin: 0 auto;
    }
    
    /* Header */
    .header {
      background: white;
      padding: 20px 30px;
      border-radius: 20px;
      box-shadow: 0 10px 30px rgba(0,0,0,0.1);
      margin-bottom: 30px;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    
    .logo {
      display: flex;
      align-items: center;
      gap: 12px;
      font-size: 24px;
      font-weight: 900;
      color: var(--green);
    }
    
    .logo-icon {
      width: 48px;
      height: 48px;
      background: linear-gradient(135deg, var(--gold), var(--orange));
      border-radius: 12px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 24px;
    }
    
    .header-actions {
      display: flex;
      gap: 12px;
    }
    
    .btn-header {
      padding: 10px 20px;
      border: 2px solid var(--green);
      background: white;
      color: var(--green);
      border-radius: 10px;
      font-weight: 700;
      cursor: pointer;
      transition: all 0.2s;
      text-decoration: none;
      display: inline-block;
    }
    
    .btn-header:hover {
      background: var(--green);
      color: white;
    }
    
    .btn-guest {
      padding: 12px 24px;
      background: linear-gradient(135deg, var(--gold), var(--orange));
      color: #000;
      border: none;
      border-radius: 10px;
      font-weight: 800;
      cursor: pointer;
      text-decoration: none;
      display: inline-block;
      box-shadow: 0 8px 20px rgba(249, 115, 22, 0.3);
      transition: all 0.2s;
      font-size: 14px;
    }
    
    .btn-guest:hover {
      transform: translateY(-2px);
      box-shadow: 0 12px 28px rgba(249, 115, 22, 0.4);
    }
    
    /* Main Content */
    .main-content {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 30px;
    }
    
    .card {
      background: white;
      padding: 40px;
      border-radius: 24px;
      box-shadow: 0 20px 60px rgba(0,0,0,0.12);
    }
    
    .card h2 {
      font-size: 28px;
      color: var(--dark);
      margin-bottom: 24px;
      display: flex;
      align-items: center;
      gap: 12px;
    }
    
    .badge {
      background: linear-gradient(135deg, #dcfce7, #d1fae5);
      border: 2px solid #22c55e;
      padding: 8px 16px;
      border-radius: 10px;
      font-weight: 800;
      color: #065f46;
      font-size: 11px;
      letter-spacing: 0.08em;
      display: inline-block;
      margin-bottom: 20px;
    }
    
    /* Form */
    .form-group {
      margin-bottom: 20px;
    }
    
    .form-group label {
      display: block;
      font-weight: 700;
      color: var(--dark);
      margin-bottom: 8px;
      font-size: 14px;
    }
    
    .form-group input,
    .form-group select {
      width: 100%;
      padding: 14px 16px;
      border: 2px solid #e2e8f0;
      border-radius: 12px;
      font-size: 15px;
      font-weight: 600;
      transition: all 0.2s;
    }
    
    .form-group input:focus,
    .form-group select:focus {
      outline: none;
      border-color: var(--green);
      box-shadow: 0 0 0 3px rgba(22, 163, 74, 0.1);
    }
    
    .btn-primary {
      width: 100%;
      padding: 16px;
      background: linear-gradient(135deg, var(--green), #22c55e);
      color: white;
      border: none;
      border-radius: 12px;
      font-weight: 900;
      font-size: 16px;
      cursor: pointer;
      letter-spacing: 0.05em;
      box-shadow: 0 8px 20px rgba(22, 163, 74, 0.3);
      transition: all 0.2s;
      margin-top: 10px;
    }
    
    .btn-primary:hover {
      transform: translateY(-2px);
      box-shadow: 0 12px 28px rgba(22, 163, 74, 0.4);
    }
    
    .btn-primary:disabled {
      opacity: 0.6;
      cursor: not-allowed;
      transform: none;
    }
    
    /* Price Display */
    .price-display {
      background: linear-gradient(135deg, #fef3c7, #fde68a);
      border: 2px solid #fbbf24;
      padding: 20px;
      border-radius: 16px;
      margin: 20px 0;
      display: none;
    }
    
    .price-display.show {
      display: block;
    }
    
    .price-display h3 {
      color: #78350f;
      margin-bottom: 10px;
      font-size: 18px;
    }
    
    .price-amount {
      font-size: 32px;
      font-weight: 900;
      color: #78350f;
    }
    
    /* Features */
    .features {
      display: grid;
      gap: 16px;
    }
    
    .feature {
      display: flex;
      align-items: center;
      gap: 12px;
      padding: 16px;
      background: #f8fafc;
      border-radius: 12px;
      border: 1px solid #e2e8f0;
    }
    
    .feature-icon {
      font-size: 24px;
      flex-shrink: 0;
    }
    
    .feature-text {
      font-weight: 600;
      color: var(--dark);
      font-size: 14px;
    }
    
    /* Message */
    .msg {
      padding: 14px;
      border-radius: 10px;
      font-size: 14px;
      font-weight: 700;
      margin: 16px 0;
      display: none;
    }
    
    .msg.error {
      background: #fee2e2;
      color: #991b1b;
      border: 2px solid #fca5a5;
      display: block;
    }
    
    .msg.success {
      background: #dcfce7;
      color: #065f46;
      border: 2px solid #86efac;
      display: block;
    }
    
    /* Responsive */
    @media (max-width: 768px) {
      .main-content {
        grid-template-columns: 1fr;
      }
      
      .header {
        flex-direction: column;
        gap: 16px;
        text-align: center;
      }
      
      .header-actions {
        flex-direction: column;
        width: 100%;
      }
      
      .btn-header,
      .btn-guest {
        width: 100%;
        text-align: center;
      }
      
      .card {
        padding: 24px;
      }
    }
  </style>
</head>
<body>

<div class="container">
  <!-- Header -->
  <div class="header">
    <div class="logo">
      <div class="logo-icon">üöó</div>
      <span>DIGIY DRIVER</span>
    </div>
    <div class="header-actions">
      <a href="/guest-booking-v4.html?module=driver" class="btn-guest">
        ‚ö° Commander sans compte
      </a>
      <a href="/connexion-client.html" class="btn-header">üë§ Connexion</a>
      <a href="/inscription-client.html" class="btn-header">‚ú® S'inscrire</a>
    </div>
  </div>
  
  <!-- Main Content -->
  <div class="main-content">
    
    <!-- Left: Booking Form -->
    <div class="card">
      <div class="badge">‚úÖ 0% COMMISSION ¬∑ PAIEMENT DIRECT</div>
      
      <h2>üöó Commander un VTC</h2>
      
      <form id="bookingForm">
        <div class="form-group">
          <label>üìç Point de d√©part</label>
          <input 
            type="text" 
            id="pickup" 
            placeholder="Ex: Dakar Centre, Plateau..."
            required
          />
        </div>
        
        <div class="form-group">
          <label>üìç Destination</label>
          <input 
            type="text" 
            id="destination" 
            placeholder="Ex: A√©roport Blaise Diagne..."
            required
          />
        </div>
        
        <div class="form-group">
          <label>üöó Type de v√©hicule</label>
          <select id="vehicleType" required>
            <option value="">Choisir...</option>
            <option value="standard">Standard (4 places)</option>
            <option value="comfort">Confort (4 places)</option>
            <option value="van">Van (7 places)</option>
            <option value="premium">Premium (4 places)</option>
          </select>
        </div>
        
        <div class="form-group">
          <label>üë• Nombre de passagers</label>
          <select id="passengers" required>
            <option value="1">1 passager</option>
            <option value="2">2 passagers</option>
            <option value="3">3 passagers</option>
            <option value="4">4 passagers</option>
            <option value="5">5 passagers</option>
            <option value="6">6 passagers</option>
            <option value="7">7 passagers</option>
          </select>
        </div>
        
        <div class="price-display" id="priceDisplay">
          <h3>üí∞ Prix estim√©</h3>
          <div class="price-amount" id="priceAmount">--</div>
          <p style="font-size: 12px; color: #78350f; margin-top: 8px;">
            Prix indicatif - Le chauffeur confirmera le montant final
          </p>
        </div>
        
        <button type="submit" class="btn-primary" id="btnEstimate">
          üí∞ Estimer le prix
        </button>
        
        <button type="button" class="btn-primary" id="btnBook" style="display: none;">
          üöó Confirmer la r√©servation
        </button>
      </form>
      
      <div id="msg" class="msg"></div>
    </div>
    
    <!-- Right: Features & Info -->
    <div class="card">
      <h2>‚ú® Pourquoi DIGIY DRIVER ?</h2>
      
      <div class="features">
        <div class="feature">
          <div class="feature-icon">üí∞</div>
          <div class="feature-text">
            <strong>0% commission</strong><br>
            Les chauffeurs gardent 100% de leurs gains
          </div>
        </div>
        
        <div class="feature">
          <div class="feature-icon">üí≥</div>
          <div class="feature-text">
            <strong>Paiement direct</strong><br>
            Payez votre chauffeur directement (cash, Wave, Orange Money)
          </div>
        </div>
        
        <div class="feature">
          <div class="feature-icon">‚ö°</div>
          <div class="feature-text">
            <strong>Disponible 24/7</strong><br>
            Commandez un VTC √† tout moment
          </div>
        </div>
        
        <div class="feature">
          <div class="feature-icon">üõ°Ô∏è</div>
          <div class="feature-text">
            <strong>Chauffeurs v√©rifi√©s</strong><br>
            Tous nos chauffeurs sont v√©rifi√©s et assur√©s
          </div>
        </div>
        
        <div class="feature">
          <div class="feature-icon">üì±</div>
          <div class="feature-text">
            <strong>Suivi en temps r√©el</strong><br>
            Suivez votre chauffeur en direct sur la carte
          </div>
        </div>
        
        <div class="feature">
          <div class="feature-icon">‚≠ê</div>
          <div class="feature-text">
            <strong>Service de qualit√©</strong><br>
            Note moyenne : 4.8/5 - Plus de 10,000 courses
          </div>
        </div>
      </div>
      
      <div style="margin-top: 30px; padding: 20px; background: #f8fafc; border-radius: 12px;">
        <h3 style="color: var(--dark); margin-bottom: 12px; font-size: 16px;">
          üéÅ Nouveau client ?
        </h3>
        <p style="color: var(--gray); font-size: 14px; margin-bottom: 16px;">
          Cr√©ez votre compte gratuitement et acc√©dez √† tous les services DIGIYLYFE
        </p>
        <a href="/inscription-client.html" class="btn-primary" style="display: inline-block; text-align: center; text-decoration: none;">
          ‚ú® Cr√©er mon compte gratuit
        </a>
      </div>
    </div>
    
  </div>
</div>

<script>
console.log('üöó DIGIY DRIVER - Interface client charg√©e');

// Prix de base par km (en FCFA)
const PRICE_PER_KM = {
  standard: 200,
  comfort: 300,
  van: 350,
  premium: 500
};

// Prix minimum (en FCFA)
const MIN_PRICE = 2000;

// Distance estim√©e entre lieux (√† remplacer par Google Maps API)
const ESTIMATED_DISTANCES = {
  'dakar_centre_aeroportblaise': 50,
  'dakar_centre_rufisque': 25,
  'plateau_almadies': 15,
  'default': 20
};

function showMsg(text, type = 'error') {
  const msg = document.getElementById('msg');
  msg.textContent = text;
  msg.className = 'msg ' + type;
}

function estimateDistance(pickup, destination) {
  // TODO: Int√©grer Google Maps Distance Matrix API
  // Pour l'instant, retourne une estimation par d√©faut
  return ESTIMATED_DISTANCES.default;
}

function calculatePrice(distance, vehicleType) {
  const pricePerKm = PRICE_PER_KM[vehicleType] || PRICE_PER_KM.standard;
  const totalPrice = distance * pricePerKm;
  return Math.max(totalPrice, MIN_PRICE);
}

// Formulaire d'estimation
document.getElementById('bookingForm').addEventListener('submit', (e) => {
  e.preventDefault();
  
  const pickup = document.getElementById('pickup').value.trim();
  const destination = document.getElementById('destination').value.trim();
  const vehicleType = document.getElementById('vehicleType').value;
  const passengers = document.getElementById('passengers').value;
  
  if (!pickup || !destination || !vehicleType) {
    showMsg('‚ö†Ô∏è Veuillez remplir tous les champs');
    return;
  }
  
  // Calculer le prix
  const distance = estimateDistance(pickup, destination);
  const price = calculatePrice(distance, vehicleType);
  
  // Afficher le prix
  document.getElementById('priceAmount').textContent = `${price.toLocaleString('fr-FR')} FCFA`;
  document.getElementById('priceDisplay').classList.add('show');
  
  // Changer le bouton
  document.getElementById('btnEstimate').style.display = 'none';
  document.getElementById('btnBook').style.display = 'block';
  
  showMsg('‚úÖ Prix estim√© calcul√© ! Cliquez pour confirmer la r√©servation', 'success');
  
  console.log('Estimation:', {
    pickup,
    destination,
    vehicleType,
    passengers,
    distance,
    price
  });
});

// Bouton de confirmation
document.getElementById('btnBook').addEventListener('click', () => {
  // V√©rifier si l'utilisateur est connect√©
  // TODO: V√©rifier session Supabase
  
  const pickup = document.getElementById('pickup').value;
  const destination = document.getElementById('destination').value;
  const vehicleType = document.getElementById('vehicleType').value;
  const passengers = document.getElementById('passengers').value;
  const price = document.getElementById('priceAmount').textContent;
  
  // Rediriger vers r√©servation rapide si pas connect√©
  showMsg('üîÑ Redirection vers la r√©servation...', 'success');
  
  setTimeout(() => {
    // Sauvegarder les d√©tails
    localStorage.setItem('pendingBooking', JSON.stringify({
      pickup,
      destination,
      vehicleType,
      passengers,
      estimatedPrice: price,
      timestamp: Date.now()
    }));
    
    // Rediriger
    window.location.href = '/reservation-rapide.html?module=driver';
  }, 1000);
});

// R√©initialiser si on change un champ
['pickup', 'destination', 'vehicleType', 'passengers'].forEach(id => {
  document.getElementById(id).addEventListener('change', () => {
    document.getElementById('priceDisplay').classList.remove('show');
    document.getElementById('btnEstimate').style.display = 'block';
    document.getElementById('btnBook').style.display = 'none';
    document.getElementById('msg').style.display = 'none';
  });
});
</script>

</body>
</html>
